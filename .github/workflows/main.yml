name: Maven Build and Publish
on:
     workflow_dispatch: 
jobs:
  build-and-publish:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2
    - name: Set up JDK
      uses: actions/setup-java@v2
      with:
        java-version: '11'
    - name: Build and Publish with Maven
      env:
        JFROG_USERNAME: ${{ secrets.JFROG_USERNAME }}
        JFROG_PASSWORD: ${{ secrets.JFROG_PASSWORD }}
      run: |
         mvn clean install
         mvn deploy -Dmaven.deploy.skip=true -Dmaven.test.skip=true -Dmaven.repo.url=http://52.54.111.101:8081/artifactory/webapp/#/home -Dmaven.repo.username=$JFROG_USERNAME -Dmaven.repo.password=$JFROG_PASSWORD
